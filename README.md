Билд собирался под Desktop Qt 6.9.3 MinGW

## Архитектурные решения

### Собственный виджет ZaborWidget
Реализован как наследник `QWidget` для полного контроля над отрисовкой и оптимизациями, это даёт:
- более высокую производительность,
- предсказуемую работу рендера,
- удобное управление layout-кэшем.

### Хранение сообщений в QHash<QString, Message>
Каждому автору соответствует одно сообщение.
Такое решение обеспечивает:
- быстрый доступ по ключу O(1),
- простое обновление существующих сообщений,
- отсутствие скрытой сортировки и лишней логики.

### Кэширование text layout’ов
`QTextLayout` создаётся один раз и переиспользуется до изменения текста или шрифта.
Это устраняет множество перерисовок и вычислений, что особенно важно при автообновлении.

### Отрисовка только изменённой области (dirty region)
Использование `update(region)` позволяет избегать полной перерисовки при каждом обновлении.

## Оптимизация рендеринга ZaborWidget

Виджет `ZaborWidget` был ускорен благодаря кэшированию текстовой разметки (`QTextLayout`) и геометрии сообщений.
Теперь перерасчёт выполняется только если сообщение действительно изменилось, что снижает нагрузку при частых обновлениях.

Что было сделано

- Кэширование `QTextLayout` — разметка текста создаётся один раз и переиспользуется.

- Кэширование bounds — геометрия текста не пересчитывается при каждом `update()`.

- Минимизация обновлений — сообщения не перестраиваются, если данные не изменились.

- Обрезание текста выполняет сам Qt (`clipRect`), без дополнительной логики.

Результат

Производительность выросла в 2–5 раз в зависимости от нагрузки.
```
AUTO RATE: 25.9578 updates/sec
AUTO RATE: 46.594 updates/sec
AUTO RATE: 56.2577 updates/sec
AUTO RATE: 44.08 updates/sec
AUTO RATE: 32.4183 updates/sec
```
Пример после оптимизации (флаг useOptimized = true):
```
AUTO RATE: 18.383 updates/sec
AUTO RATE: 34.2466 updates/sec
AUTO RATE: 48.0769 updates/sec
AUTO RATE: 60.2319 updates/sec
AUTO RATE: 70.9925 updates/sec
AUTO RATE: 80.5542 updates/sec
AUTO RATE: 89.0631 updates/sec
AUTO RATE: 96.14 updates/sec
AUTO RATE: 102.008 updates/sec
AUTO RATE: 107.793 updates/sec
AUTO RATE: 112.788 updates/sec
AUTO RATE: 116.527 updates/sec
AUTO RATE: 119.168 updates/sec
```
| Версия            | Средняя скорость автообновления |
| ----------------- | ------------------------------- |
| До оптимизации    | 25–60 updates/sec               |
| После оптимизации | 80–120+ updates/sec             |

Тесты лежат в отдельном проекте tests
## Что тестируется

- корректное добавление новых сообщений;

- обновление существующих сообщений по автору;

- корректный расчёт геометрии;

Запуск тестов
```fence_tests.exe```

Или через Qt Creator: Build → Run (tests project).
